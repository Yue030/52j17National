<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shanghai Battle!</title>
    <script src="./js/jquery-3.4.1.js"></script>
    <script src="./lib/bootstrap/bootstrap.js"></script>
    <link rel="stylesheet" href="./lib/fontawesome/fontawesome.css">
    <link rel="stylesheet" href="./lib/bootstrap/bootstrap.css">
    <link rel="stylesheet" href="./css/style_template.css">
</head>

<body class="vw-100 vh-100 overflow-hidden">
    <header>
        <nav class="shadow">
            <img src="./img/01_LOGO.png" alt="">
            <div class="nav-item">
                <a href="#index-bg">首頁</a>
                <a href="#message-board">玩家留言</a>
                <a href="#battle">玩家參賽</a>
                <a href="#login">網站管理</a>
            </div>
        </nav>
    </header>

    <div id="main-carousel" class="carousel vert slide w-100 h-100" data-interval="false" data-wrap="false">
        <div class="carousel-inner w-100 h-100">
            <div id="index-bg" class="carousel-item w-100 h-100 user-select-none">
                <div class="w-100 h-100">
                    <img src="./img/3675065.jpg">

                    <div class="mask-area">
                        <h1 class="title">
                            Welcome
                            <br>
                            to
                            <br>
                            Shanghai
                            <br>
                            Battle!
                        </h1>
                    </div>

                    <div class="mouse text-white">
                        <i class="fas fa-mouse fa-2x"></i>
                        <i class="fas fa-arrow-down fa-2x"></i>
                    </div>
                </div>
            </div>

            <div id="message-board" class="carousel-item w-100 h-100">
                <div class="container section">
                    <div class="section-title">
                        <div class="title">
                            <i class="fas fa-comment fa-lg"></i>
                            <p>玩家留言板</p>
                        </div>

                        <div class="section-button d-flex justify-contents-center align-items-center h-100 text-danger">
                            <i class="fas fa-plus-circle fa-2x"></i>
                        </div>
                    </div>

                    <div class="section-list">
                        <div class="message animate" data-animate="slide-right">
                            <div class="avatar">
                                <img src="./user_avatar/198763392_1133555603793239_8670521802306227382_n .jpg">
                            </div>

                            <div class="content">
                                <div class="name">
                                    Yue
                                </div>
                                <div class="comment">
                                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Eos, nihil officiis?
                                    Facilis eveniet blanditiis ratione quisquam sapiente in sed omnis corporis
                                    dignissimos culpa aspernatur itaque veritatis rem laboriosam voluptate, officia
                                    expedita? Doloribus temporibus aspernatur, nulla dicta cum modi ratione dolores
                                    excepturi quidem ipsam, eveniet veritatis error maxime aperiam, sit voluptates
                                    veniam similique quas ad libero. Accusantium vel, recusandae cupiditate laboriosam
                                    tempora asperiores dignissimos doloribus itaque minus reiciendis voluptas aperiam ex
                                    repellat. Aliquid quae vero placeat enim eligendi, reprehenderit, reiciendis nobis
                                    nam delectus, iusto nihil quod! Harum iste dolore vero deleniti quod ad aperiam quae
                                    eum consequuntur, commodi expedita, alias aut.
                                </div>
                                <div class="admin-reply">
                                    <p>管理員回覆：</p>
                                    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eos cupiditate fuga atque!
                                    Incidunt ipsam sapiente error adipisci quis, quod soluta.
                                </div>
                                <div class="info">
                                    <div class="date-info">
                                        <div class="date">
                                            <p>發表於 2022/06/27 11:10:05</p>
                                        </div>
                                        <div class="edit-date">
                                            <p>修改於 2022/06/27 12:12:12</p>
                                        </div>
                                    </div>
                                    <div class="user-info">
                                        <div class="email icon">
                                            <i class="fas fa-envelope"></i>
                                            <p>zhikuan0322@gmail.com</p>
                                        </div>
                                        <div class="phone icon">
                                            <i class="fas fa-phone"></i>
                                            <p>0966934501</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="feature">
                                <div class="dropdownicon">
                                    <i class="fas fa-ellipsis-h"></i>
                                </div>

                                <div class="dropdown">
                                    <input class="w-100 text-center" type="text" placeholder="留言序號">
                                    <div class="btn-area">
                                        <button class="btn btn-outline-danger w-100"
                                            onclick="alert('Update')">Update</button>
                                        <button class="btn btn-danger w-100" onclick="alert('Delete')">Delete</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="message animate" data-animate="slide-left">
                            <div class="avatar">
                                <img src="./user_avatar/198763392_1133555603793239_8670521802306227382_n .jpg">
                            </div>

                            <div class="content">
                                <div class="name">
                                    Yue
                                </div>
                                <div class="comment">
                                    Lorem ipsum dolor sit amet.
                                </div>
                                <div class="info">
                                    <div class="date-info">
                                        <div class="date">
                                            <p>發表於 2022/06/25 02:15:11</p>
                                        </div>
                                    </div>
                                    <div class="user-info">
                                        <div class="email icon">
                                            <i class="fas fa-envelope"></i>
                                            <p>zhikuan0322@gmail.com</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="feature">
                                <div class="dropdownicon">
                                    <i class="fas fa-ellipsis-h"></i>
                                </div>

                                <div class="dropdown">
                                    <input class="w-100 text-center" type="text" placeholder="留言序號">
                                    <div class="btn-area">
                                        <button class="btn btn-info w-100" onclick="alert('Update')">Update</button>
                                        <button class="btn btn-danger w-100" onclick="alert('Delete')">Delete</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="message animate" data-animate="slide-right">
                            <div class="avatar">
                            </div>
                            <div class="content">
                                <div class="name">
                                    Yue
                                </div>
                                <div class="comment">
                                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Ipsa, et. Alias, doloremque
                                    animi assumenda voluptas asperiores autem earum eaque odit labore tempora adipisci
                                    aliquid dolorum nisi blanditiis ea impedit sint eveniet eius aliquam voluptatum!
                                    Aliquam architecto minima in voluptates. Ad!
                                </div>
                                <div class="info">
                                    <div class="date-info">
                                        <div class="date">
                                            <p>發表於 2022/06/24 03:15:11</p>
                                        </div>
                                        <div class="edit-date">
                                            <p>修改於 2022/06/25 13:12:12</p>
                                        </div>
                                    </div>
                                    <div class="user-info">
                                        <div class="phone icon">
                                            <i class="fas fa-phone"></i>
                                            <p>0966934501</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="feature">
                                <div class="dropdownicon">
                                    <i class="fas fa-ellipsis-h"></i>
                                </div>

                                <div class="dropdown">
                                    <input class="w-100 text-center" type="text" placeholder="留言序號">
                                    <div class="btn-area">
                                        <button class="btn btn-info w-100" onclick="alert('Update')">Update</button>
                                        <button class="btn btn-danger w-100" onclick="alert('Delete')">Delete</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="message animate" data-animate="slide-left">
                            <div class="avatar">
                                <img src="./user_avatar/198763392_1133555603793239_8670521802306227382_n .jpg">
                            </div>

                            <div class="content">
                                <div class="name">
                                    Yue
                                </div>
                                <div class="comment">
                                    Lorem, ipsum dolor.
                                </div>
                                <div class="admin-reply">
                                    <p>管理員回覆：</p>
                                    Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dolorem totam, ad
                                    distinctio assumenda corrupti ipsum eligendi magni tempore alias in molestiae, fugit
                                    iure quia pariatur eaque accusantium, magnam accusamus porro natus dicta? Harum
                                    ipsam ab ipsum quod hic explicabo, voluptates, error voluptatibus est asperiores
                                    aliquam molestiae quam sunt consequuntur. Cupiditate neque officia, at reiciendis
                                    asperiores, modi iusto quos voluptate vitae voluptates esse magnam ipsa, ea ut
                                    labore repudiandae sequi corporis dolor nisi ullam earum omnis optio. Rerum, est
                                    labore nulla fuga alias dolor aliquam fugit animi necessitatibus iste soluta quia
                                    earum atque rem iusto tenetur cum expedita ab placeat quos sequi. Dolore, debitis
                                    nostrum vero fugiat nisi dolor molestias eveniet deserunt numquam rerum recusandae,
                                    expedita sequi saepe eos cupiditate inventore accusantium. Dolor laudantium, libero
                                    dolores reprehenderit recusandae nesciunt? Ab quam delectus aut blanditiis, alias,
                                    veniam placeat eveniet hic nam asperiores doloremque molestias tempore numquam
                                    recusandae officia magni laudantium natus iste debitis sapiente temporibus inventore
                                    praesentium at enim! Doloremque eligendi odit dolorem culpa dicta maiores eveniet
                                    tenetur. Modi praesentium, odit eveniet esse nam magni dicta aspernatur
                                    reprehenderit. Error repellendus ipsum eos, harum adipisci distinctio libero quos
                                    corporis non quaerat eveniet quis obcaecati illo, aperiam magni quod dolor
                                    voluptatem sint consectetur debitis!
                                </div>
                                <div class="info">
                                    <div class="date-info">
                                        <div class="date">
                                            <p>發表於 2022/06/21 12:10:05</p>
                                        </div>
                                    </div>
                                    <div class="user-info">
                                        <div class="email icon">
                                            <i class="fas fa-envelope"></i>
                                            <p>zhikuan0322@gmail.com</p>
                                        </div>
                                        <div class="phone icon">
                                            <i class="fas fa-phone"></i>
                                            <p>0966934501</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="feature">
                                <div class="dropdownicon">
                                    <i class="fas fa-ellipsis-h"></i>
                                </div>

                                <div class="dropdown">
                                    <input class="w-100 text-center" type="text" placeholder="留言序號">
                                    <div class="btn-area">
                                        <button class="btn btn-info w-100" onclick="alert('Update')">Update</button>
                                        <button class="btn btn-danger w-100" onclick="alert('Delete')">Delete</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="message animate" data-animate="slide-right">
                            <div class="avatar">
                            </div>

                            <div class="content">
                                <div class="name">
                                    Yue
                                </div>
                                <div class="comment">
                                    ( 此筆留言已刪除 )
                                </div>
                                <div class="info">
                                    <div class="date-info">
                                        <div class="date">
                                            <p>發表於 2022/06/21 12:10:05</p>
                                        </div>

                                        <div class="edit-date">
                                            <p>刪除於 2022/06/22 03:05:12</p>
                                        </div>
                                    </div>
                                    <div class="user-info">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <form class="section-form" action="#">
                        <h1>新增你的留言</h1>

                        <div class="input-area">
                            <div class="input-boxs">
                                <div class="input-box">
                                    <input id="name" name="name" type="text" required>
                                    <label for="name">玩家姓名</label>
                                </div>
                                <div class="input-box hideable">
                                    <input id="email" name="email" type="text" required>
                                    <label for="email">E-mail</label>
                                </div>
                                <div class="input-box hideable">
                                    <input id="phone" name="phone" type="text" required>
                                    <label for="phone">連絡電話</label>
                                    <div class="hide-toggle">
                                        <div class="show">
                                            <i class="fas fa-eye fa-lg"></i>
                                        </div>
                                        <div class="hide">
                                            <i class="fas fa-eye-slash fa-lg"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="input-box">
                                    <input id="code" name="code" type="number" required>
                                    <label for="code">留言序號</label>
                                </div>
                                <div class="file-input-box">
                                    <div class="box">
                                        <label class="btn" for="img">
                                            <input id="img" name="img" type="file"
                                                accept="image/png, image/gif, image/jpeg">
                                            <i class="fas fa-image"></i>上傳圖片</label>
                                        <p id="img_text">尚未選擇圖片</p>
                                    </div>

                                    <div class="preview">
                                        <img id="preview_img" src="" alt="">
                                    </div>
                                </div>
                                <!-- <div class="textarea-input-area">
                                    <div class="textarea-input-box">
                                        <label for="comment">留言內容</label>
                                        <textarea name="comment" id="comment" rows="4" required></textarea>
                                    </div>
                                    <div class="textarea-input-box">
                                        <label for="reply">管理者回復</label>
                                        <textarea name="comment" id="reply" rows="4" required></textarea>
                                    </div>
                                </div> -->
                                <div class="textarea-input-box">
                                    <label for="comment">留言內容</label>
                                    <textarea name="comment" id="comment" rows="4" required></textarea>
                                </div>
                            </div>

                            <div class="input-button">
                                <input class="btn btn-danger" type="submit" value="送出">
                            </div>
                        </div>
                    </form>

                    <div class="mouse">
                        <i class="fas fa-mouse fa-2x"></i>
                        <i class="fas fa-arrow-down fa-2x"></i>
                    </div>
                </div>
            </div>

            <div id="battle" class="carousel-item w-100 h-100">
                <div class="container section">
                    <div class="section-title">
                        <div class="title">
                            <i class="fas fa-gamepad fa-lg"></i>
                            <p>玩家參賽</p>
                        </div>

                        <div class="section-button d-flex justify-contents-center align-items-center h-100 text-danger">
                            <i class="fas fa-user-plus fa-2x"></i>
                        </div>
                    </div>

                    <div class="section-list pair-list">
                        <div class="unpair row p-3">
                            <div class="w-100 text-center col-12">
                                <h2 class="my-3">待配對玩家</h2>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <div class="unpair-user col-2">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                        </div>
                        <hr class="w-100">
                        <div class="pair-card">
                            <div class="first">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <p>VS</p>
                            <div class="second">
                                <img src="./user_avatar/1655291282_ax73v-p6fxj.png" alt="">
                                <p>AAA</p>
                            </div>
                        </div>
                        <div class="pair-card">
                            <div class="first">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <p>VS</p>
                            <div class="second">
                                <img src="./user_avatar/1655291282_ax73v-p6fxj.png" alt="">
                                <p>AAA</p>
                            </div>
                        </div>
                        <div class="pair-card">
                            <div class="first">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <p>VS</p>
                            <div class="second">
                                <img src="./user_avatar/1655291282_ax73v-p6fxj.png" alt="">
                                <p>AAA</p>
                            </div>
                        </div>
                        <div class="pair-card">
                            <div class="first">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <p>VS</p>
                            <div class="second">
                                <img src="./user_avatar/1655291282_ax73v-p6fxj.png" alt="">
                                <p>AAA</p>
                            </div>
                        </div>
                        <div class="pair-card">
                            <div class="first">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <p>VS</p>
                            <div class="second">
                                <img src="./user_avatar/1655291282_ax73v-p6fxj.png" alt="">
                                <p>AAA</p>
                            </div>
                        </div>
                        <div class="pair-card">
                            <div class="first">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <p>VS</p>
                            <div class="second">
                                <img src="./user_avatar/1655291282_ax73v-p6fxj.png" alt="">
                                <p>AAA</p>
                            </div>
                        </div>
                        <div class="pair-card">
                            <div class="first">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <p>VS</p>
                            <div class="second">
                                <img src="./user_avatar/1655291282_ax73v-p6fxj.png" alt="">
                                <p>AAA</p>
                            </div>
                        </div>
                        <div class="pair-card">
                            <div class="first">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <p>VS</p>
                            <div class="second">
                                <img src="./user_avatar/1655291282_ax73v-p6fxj.png" alt="">
                                <p>AAA</p>
                            </div>
                        </div>
                        <div class="pair-card">
                            <div class="first">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <p>VS</p>
                            <div class="second">
                                <img src="./user_avatar/1655291282_ax73v-p6fxj.png" alt="">
                                <p>AAA</p>
                            </div>
                        </div>
                        <div class="pair-card">
                            <div class="first">
                                <img src="./img/3675065.jpg" alt="">
                                <p>TEST</p>
                            </div>
                            <p>VS</p>
                            <div class="second">
                                <img src="./user_avatar/1655291282_ax73v-p6fxj.png" alt="">
                                <p>AAA</p>
                            </div>
                        </div>
                    </div>

                    <form class="section-form" action="#">
                        <h1>報名參賽</h1>

                        <div class="input-area">
                            
                        </div>
                    </form>

                    <div class="mouse">
                        <i class="fas fa-mouse fa-2x"></i>
                        <i class="fas fa-arrow-down fa-2x"></i>
                    </div>
                </div>
            </div>

            <div id="login" class="carousel-item w-100 h-100">
                <div class="d-flex justify-content-center align-items-center section">
                    <form id="loginForm" action="#">
                        <h1>網站管理</h1>

                        <div class="input-area">
                            <div class="input-boxs">
                                <div class="input-box">
                                    <input id="acc" name="acc" type="text" required>
                                    <label for="acc">帳號</label>
                                </div>
                                <div class="input-box hideable">
                                    <input id="pw" name="pw" type="text" required>
                                    <label for="pw">密碼</label>
                                </div>
                                <div class="input-box">
                                    <input id="code" name="code" type="text" required>
                                    <label for="code">圖片驗證</label>
                                </div>
                            </div>

                            <div class="input-button">
                                <input class="btn btn-danger" type="submit" value="送出">
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <footer>
        Copyright &copy; ShanghaiBattle 2022 All Rights Reserved.
    </footer>
</body>

<script>
    let isShowAddMsg = false;
    $(document).ready(() => {
        carouselTo(window.location.hash || "#index-bg", false);
        window.scrollTo(0, 0);
        animate();
    });

    $(".dropdownicon").click(function () {
        let el = $(this).siblings(".dropdown");
        let hasActive = el.hasClass("active");
        $(".dropdown").removeClass("active");
        if (hasActive) {
            return;
        }
        el.addClass("active");
    });

    // $("#addBtn").click(function () {
    //     if (isShowAddMsg) {
    //         $(".message-board-list").show();
    //         $("#addMsgForm").hide();
    //         $(".title").find("p").text("玩家留言板");
    //         $("#addBtn").find("i").removeClass("fa-arrow-alt-circle-left");
    //         $("#addBtn").find("i").addClass("fa-plus-circle");
    //         isShowAddMsg = false;
    //         return;
    //     }
    //     $(".message-board-list").hide();
    //     $("#addMsgForm").css("display", "flex");
    //     $(".title").find("p").text("新增留言");
    //     $("#addBtn").find("i").addClass("fa-arrow-alt-circle-left");
    //     $("#addBtn").find("i").removeClass("fa-plus-circle");
    //     isShowAddMsg = true;
    // });

    $(".section-button").click(function () {
        let section = $(this).closest(".section");
        if (section.find(".section-list").is(":visible")) {
            section.find(".section-list").hide();
            section.find(".section-form").css("display", "flex");
            // TODO VUE 更改文字狀態
            // TODO VUE 更改icon class狀態
            $(this).find("i").addClass("fa-arrow-alt-circle-left");
            $(this).find("i").removeClass("fa-plus-circle");
            return;
        }
        section.find(".section-list").show();
        section.find(".section-form").hide();
        // TODO VUE 更改文字狀態
        // TODO VUE 更改icon class狀態
        $(this).find("i").removeClass("fa-arrow-alt-circle-left");
        $(this).find("i").addClass("fa-plus-circle");
    });

    $(window).on("hashchange", e => carouselTo(window.location.hash));
    $(window).click(e => {
        if ($(e.target).closest(".dropdownicon").length == 0 && $(e.target).closest(".dropdown").length == 0) {
            $(".dropdown").removeClass("active");
        }
    });

    function carouselTo(hash, animate = true) {
        let idx = $(hash).index("#main-carousel .carousel-item");
        if (idx == -1) return;

        if (idx != 0) {
            $("header").addClass("active");
        } else {
            $("header").removeClass("active")
        }

        if (animate) {
            $("#main-carousel").carousel(idx);
            animateTimeout();
            return;
        }

        $(".carousel-item").removeClass("active");
        $(hash).addClass("active");
        animateTimeout();
    }

    $("body").on("mousewheel", e => {
        let parent = $(e.target).closest(".section-list");

        if ($(e.target).is("textarea")) {
            return;
        }

        if (parent.length > 0 && (parent.get(0).scrollHeight > parent.height())) {
            return;
        }

        e = e.originalEvent;
        let itemLength = $("#main-carousel .carousel-inner").children(".carousel-item").length;
        let itemIdx = $("#main-carousel .active").index("#main-carousel .carousel-item");
        let isDown = (e.wheelDelta <= 0 || e.detail > 0);

        if (isDown && itemIdx == itemLength - 1) {
            window.scrollTo({
                top: document.body.scrollHeight,
                behavior: 'smooth',
            });
            return;
        }

        if (!isDown && (itemIdx == itemLength - 1 && document.documentElement.scrollTop > 0)) {
            window.scrollTo({
                top: 0,
                behavior: 'smooth',
            });
            return;
        }

        if (isDown) {
            if (itemIdx == 0) $("header").addClass("active");

            $("#main-carousel").carousel('next');
            animateTimeout();
            return;
        }

        if (!isDown) {
            if (itemIdx - 1 == 0) $("header").removeClass("active");

            $("#main-carousel").carousel('prev');
            animateTimeout();
        }
    });

    function animateTimeout() {
        setTimeout(() => {
            animate();
        }, 750);
    }

    function animate() {
        var animates = $(".animate");
        animates.each((idx, el) => {
            let element = $(el);
            if (element.closest(".carousel-item").hasClass("active")) {
                element.addClass("active");
                return;
            }
            element.removeClass("active");
        })
    }

    function toggleHeader() {
        let itemIdx = $("#main-carousel .active").index("#main-carousel .carousel-item");
        if (itemIdx - 1 == 0) $("header").removeClass("active");
    }

    $("#img").change(function () {
        let input = $(this);

        if (input.val().length > 0) {
            let fileReader = new FileReader();
            fileReader.onload = function (data) {
                $("#preview_img").attr("src", data.target.result);
            }

            fileReader.readAsDataURL(input.prop("files")[0]);
            $("#preview_img").show();
            $("#img_text").text(input.prop("files")[0].name)
        }
    });
</script>

</html>